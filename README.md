# Pretty Bookmark Sidebar (Chromium Extension)

Красивый боковой менеджер закладок, который всегда доступен на любом сайте: выезжающая справа панель со структурой папок/закладок, поиском, добавлением, удалением, восстановлением и встроенными заметками (CRUD).

---

## Возможности

### Закладки
- Выезжающая **панель справа** (стрелка на правом краю экрана).
- Отображение **папок и закладок** как дерево.
- **Скролл** по списку закладок/папок.
- **Поиск** по названиям папок, закладок и URL.
- **Свернуть все** папки одной кнопкой.
- **Добавить закладку**
  - вручную URL/название
  - или **подставить текущую страницу**.
  - выбор папки (или “в корень”).
- **Создать папку** (в корне или внутри другой папки).
- **Удаление** папок/закладок крестиком справа с подтверждением.
- **Восстановление** последнего удалённого элемента из “корзины”.

### Иконки
- Фавиконки подтягиваются через сервис Google S2:
  - `https://www.google.com/s2/favicons?sz=32&domain_url=...`
- Если не получилось — fallback на `${origin}/favicon.ico`.


### Заметки (CRUD)
- Кнопка **«Заметки»** открывает модалку.
- Есть полноценный CRUD:
  - **Создать**
  - **Сохранить**
  - **Удалить** (с подтверждением)
- Хранение в `chrome.storage.local`.

---

## Установка (Developer mode)

1. Склонируйте/скачайте проект в папку, например `pretty-bookmark-sidebar/`.
2. Откройте Chromium/Chrome → `chrome://extensions/`
3. Включите **Developer mode** (Режим разработчика).
4. Нажмите **Load unpacked** (Загрузить распакованное расширение).
5. Выберите папку проекта.

Готово — стрелка появится справа на любых сайтах.

---

## Управление

- Нажмите на стрелку справа → откроется панель.
- `Esc` закрывает модальные окна (и/или панель).
- Клик по папке — раскрыть/свернуть.
- Клик по закладке — открыть в новой вкладке.
- **Средняя кнопка мыши** по закладке — открыть в новом окне.
- Крестик справа — удалить (с подтверждением).
- **Восстановить** — вернуть последний удалённый элемент (папку/закладку).

---

## Хранение данных

- Закладки: стандартный API `chrome.bookmarks`.
- “Корзина” удалённых: `chrome.storage.local`, ключ `pbm_trash` (хранится до 100 последних удалений).
- Заметки: `chrome.storage.local`, ключ `pbm_notes` (до 500 заметок).

---

## Структура проекта

pretty-bookmark-sidebar/
├─ manifest.json
├─ background.js
├─ content.js
└─ ui.css


- `background.js` — вся логика, требующая прав (создание/удаление/восстановление закладок, CRUD заметок).
- `content.js` — UI на страницах + общение с background через `chrome.runtime.sendMessage`.
- `ui.css` — стили панели и модалок.
- `manifest.json` — описание расширения (MV3).

---

## Разрешения (permissions)

- `bookmarks` — чтение/создание/удаление закладок
- `storage` — хранение корзины и заметок
- `tabs` — получить URL/название активной вкладки
- `windows` — открыть ссылку в новом окне

---

## Troubleshooting

### Не добавляются закладки
Убедитесь, что создание происходит через background (service worker) и что в `manifest.json` есть `permissions: ["bookmarks", ...]`.

### Иконки некоторых сайтов “пустые”
Некоторые сайты не отдают фавиконку стандартно. Сначала используется Google S2, затем fallback `/favicon.ico`. Если нужно **без Google** — можно реализовать приватный вариант с парсингом `<link rel="icon">` в background и кешированием.

---

## Идеи для следующих улучшений

- Полноценный экран “Корзина”: список удалённых с выборочным восстановлением.
- Экспорт/импорт заметок (JSON).
- Перетаскивание закладок (drag&drop) между папками.
- Пин избранных/часто используемых закладок сверху.
- “Приватный режим” фавиконок без внешних запросов.
- Горячие клавиши (например, открыть/закрыть панель).

---
